{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    
    "data":{
        "url": "https://raw.githubusercontent.com/rkan0017/FIT3179_A2/main/WorldEnergyConsumption-Cleaned-V3.csv",
        "format":{
            "type": "csv",
            "parse": {
                "Population": "number",
                "Year": "number"
            }
        }
    },
    "width": 1800,
    "height": 800,
    "mark": "area",
    "params": [{
        "name": "country",
        "select": {"type": "point", "fields": ["Country"]},
        "bind": "legend"
      }],
    "transform": [
        {"filter": "datum.Year > 1990"},
        {"filter": "datum.Year < 2020"},
        {
            "window": [{
              "op": "rank",
              "as": "rank"
            }],
            "sort": [{ "field": "Electricity Generation", "order": "descending" }]
          }
    ],
    "encoding": {
        "x":{
            "field": "Year"
        },
        "y":{"aggregate":"sum","field":"Electricity Generation","sort": { "field": "Electricity Generation", "order": "descending" },"stack":"center"},
        "color":{"field": "Country"},
        "tooltip":[{"field": "Country","title": "Country"},
        {"field": "Electricity Generation","title":"Electricity generated (TWh)"},
        {"field": "Year","title": "Year"}
    ],
    "opacity": {
        "condition": {"param": "country", "value": 1},
        "value": 0.2
      }
    }
}